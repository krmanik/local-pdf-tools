function R(){import("./gs-worker.203e499b.js")}var t;function M(e,a){const{operation:r,customCommand:f,pdfSetting:n,files:o,splitRange:l}=e;if(r==="merge"&&o&&o.length>1)return m(e,a);if(r==="split")return E(e,a);var s=new XMLHttpRequest;s.open("GET",e.psDataURL),s.responseType="arraybuffer",s.onload=function(){console.log("onload");let u=[];f?u=f.trim().split(/\s+/):(u=["-sDEVICE=pdfwrite","-dCompatibilityLevel=1.4","-DNOPAUSE","-dQUIET","-dBATCH","-sOutputFile=output.pdf"],r==="compress"&&n&&u.splice(2,0,`-dPDFSETTINGS=${n}`),u.push("input.pdf")),t={preRun:[function(){self.Module.FS.writeFile("input.pdf",new Uint8Array(s.response))}],postRun:[function(){var i=self.Module.FS.readFile("output.pdf",{encoding:"binary"}),d=new Blob([i],{type:"application/octet-stream"}),p=self.URL.createObjectURL(d);a({pdfDataURL:p,url:e.url})}],arguments:u,print:function(i){},printErr:function(i){},totalDependencies:0,noExitRuntime:1},self.Module?(self.Module.calledRun=!1,self.Module.postRun=t.postRun,self.Module.preRun=t.preRun,self.Module.callMain()):(self.Module=t,R())},s.send()}function m(e,a){const{files:r,customCommand:f,pdfSetting:n}=e;let o=0;const l=[];r.forEach((s,u)=>{const i=new XMLHttpRequest;i.open("GET",s),i.responseType="arraybuffer",i.onload=function(){if(l[u]=new Uint8Array(i.response),o++,o===r.length){let d=[];if(f)d=f.trim().split(/\s+/);else{d=["-sDEVICE=pdfwrite","-dCompatibilityLevel=1.4","-DNOPAUSE","-dQUIET","-dBATCH","-sOutputFile=output.pdf"],n&&d.splice(2,0,`-dPDFSETTINGS=${n}`);for(let p=0;p<r.length;p++)d.push(`input${p}.pdf`)}t={preRun:[function(){l.forEach((p,c)=>{self.Module.FS.writeFile(`input${c}.pdf`,p)})}],postRun:[function(){var p=self.Module.FS.readFile("output.pdf",{encoding:"binary"}),c=new Blob([p],{type:"application/octet-stream"}),g=self.URL.createObjectURL(c);a({pdfDataURL:g,operation:"merge"})}],arguments:d,print:function(p){},printErr:function(p){},totalDependencies:0,noExitRuntime:1},self.Module?(self.Module.calledRun=!1,self.Module.postRun=t.postRun,self.Module.preRun=t.preRun,self.Module.callMain()):(self.Module=t,R())}},i.send()})}function E(e,a){const{psDataURL:r,customCommand:f,splitRange:n}=e;var o=new XMLHttpRequest;o.open("GET",r),o.responseType="arraybuffer",o.onload=function(){console.log("split onload");let l=[];f?l=f.trim().split(/\s+/):(l=["-sDEVICE=pdfwrite","-dCompatibilityLevel=1.4","-DNOPAUSE","-dQUIET","-dBATCH"],n&&n.startPage&&n.endPage&&(l.push(`-dFirstPage=${n.startPage}`),l.push(`-dLastPage=${n.endPage}`)),l.push("-sOutputFile=output.pdf"),l.push("input.pdf")),t={preRun:[function(){self.Module.FS.writeFile("input.pdf",new Uint8Array(o.response))}],postRun:[function(){var s=self.Module.FS.readFile("output.pdf",{encoding:"binary"}),u=new Blob([s],{type:"application/octet-stream"}),i=self.URL.createObjectURL(u);a({pdfDataURL:i,operation:"split"})}],arguments:l,print:function(s){},printErr:function(s){},totalDependencies:0,noExitRuntime:1},self.Module?(self.Module.calledRun=!1,self.Module.postRun=t.postRun,self.Module.preRun=t.preRun,self.Module.callMain()):(self.Module=t,R())},o.send()}self.addEventListener("message",function({data:e}){console.log("message",e),e.target==="wasm"&&(console.log("Message received from main script",e.data),M(e.data,a=>self.postMessage(a)))});console.log("Worker ready");
